@page "/ugyfel/edit/{id:int}"
@using AutoSzereloMuhely.Domain
@using AutoSzereloMuhely.Client.Services
@inject IUgyfelService UgyfelService
@inject NavigationManager NavigationManager

<h3>Ügyfél szerkesztése</h3>

@if (ugyfel == null)
{
    <p>Betöltés...</p>
}
else
{
    <UgyfelForm Ugyfel="ugyfel" OnValidSubmit="Save" ButtonText="Mentés" />
}

@code {
    [Parameter] public int id { get; set; }
    private Ugyfel? ugyfel;

    protected override async Task OnInitializedAsync()
    {
        ugyfel = await UgyfelService.GetUgyfelAsync(id);
    }

    private async Task Save()
    {
        await UgyfelService.UpdateUgyfelAsync(id, ugyfel!);
        NavigationManager.NavigateTo("/ugyfelek");
    }
}